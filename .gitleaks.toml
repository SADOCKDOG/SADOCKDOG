title = "AutoGPT monorepo - Gitleaks config (Hardened)"

# PR 2: Configuración endurecida con fail mode activo
# - Allowlist más específica (solo archivos documentación/plantillas)
# - Regexes ajustadas para reducir falsos positivos
# - Workflow bloqueará merge si detecta secretos reales

[allowlist]
description = "Allowlist específica para plantillas y documentación"
paths = [
  # Plantillas de entorno (nunca deben contener secretos reales)
  '''(?i)^.*[\\/]\.env\.example$''',
  '''(?i)^.*[\\/]\.env\.default$''',
  '''(?i)^.*[\\/]\.env\.local\.example$''',
  # Snapshots de tests (pueden tener datos simulados, revisar manualmente si alertan)
  '''^autogpt_platform/backend/snapshots/.*\.json$''',
  # Documentación markdown (ejemplos de configuración permitidos)
  '''^docs/.*\.md$''',
  '''^.*README\.md$''',
  '''^RESET_AND_SETUP_GUIDE\.md$''',
  '''^CREATE_SDOG-AI_REPO\.md$''',
  '''^ENVIRONMENT_SETUP\.md$''',
  '''^SECURITY_SCANNING\.md$'''
]
regexes = [
  # Placeholders explícitos (strings que claramente indican ejemplo)
  '''(?i)(REPLACE_ME|REPLACEME|CHANGE_ME|CHANGEME|FILL_ME|TO_BE_FILLED|REPLACE_WITH|YOUR_[A-Z_]+_HERE)''',
  '''(?i)(your|example|dummy|test|placeholder|sample)[-_ ]?(api|client|secret|token|key|password)''',
  # Valores claramente fake (8+ caracteres repetitivos)
  '''(?i)^(xxx+|yyy+|zzz+|aaa+|000+|111+)$''',
  # Demo keys de Supabase self-hosted (públicos en docs oficiales)
  '''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9\.eyAgCiAgICAicm9sZSI6ICJhbm9uIiwKICAgICJpc3MiOiAic3VwYWJhc2UtZGVtbyI''',
  '''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9\.eyAgCiAgICAicm9sZSI6ICJzZXJ2aWNlX3JvbGUiLAogICAgImlzcyI6ICJzdXBhYmFzZS1kZW1vIi''',
  # Ejemplos de API key patterns en .env.example
  '''sk-proj-REPLACE(_WITH)?''',
  '''sk-ant-api03-REPLACE''',
  '''Iv1\.REPLACE''',
  '''gsk_REPLACE''',
  '''nvapi-REPLACE''',
  '''r8_REPLACE''',
  '''FAL_REPLACE''',
  '''jina_REPLACE''',
  # JWT example placeholder
  '''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9\.example[-a-z]*'''
]
commits = []

# Excepciones inline: añadir comentario "# gitleaks:allow" en la línea que genera falso positivo
# Solo usar tras verificar manualmente que NO es un secreto real
