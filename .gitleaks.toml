title = "Gitleaks Config"

[extend]
# Use the default gitleaks config as base
path = "https://raw.githubusercontent.com/gitleaks/gitleaks/master/config/gitleaks.toml"

[allowlist]
# Common test keys and local dev keys to avoid noisy false positives
regexes = [
  "(?i)ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9[^"]*",
  "(?i)SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9[^"]*",
  "(?i)JWT_SECRET=your-super-secret[^"]*",
  "(?i)POSTGRES_PASSWORD=your-super-secret[^"]*",
  "fake_mail_password",
  "fake_mail_user",
]

# Do not flag example templates or setup docs
paths = [
  ".*\\.env\\.example$",
  "autogpt_platform/.*\\.env\\.default$",
  "docs/ENVIRONMENT_SETUP\\.md"
]

[[rules]]
id = "ignore-localhost-and-127"
# Ignore URLs pointing to localhost/127.0.0.1 in code and envs
regex = "https?:\\/\\/(localhost|127\\.0\\.0\\.1)(:[0-9]{2,5})?"
entropy = 0
path = "*"

[[rules]]
id = "suppress-node-punycode-deprecation"
regex = "\n(Use `node --trace-deprecation .* punycode)`"
path = "*"
tags = ["noise"]

[report]
format = "sarif"
output = "gitleaks.sarif"
redact = true
